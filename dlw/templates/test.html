<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>DLW</title>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0/dist/Chart.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
</head>
<style>
@import url('https://fonts.googleapis.com/css?family=Quicksand&display=swap');

body {
    font-family: 'Quicksand', sans-serif;
    height:100%;
    margin:0;
}
html{
    height:100%;
    margin:0;
}
.page-content{
    min-height:100%;
    margin-bottom:-40px;
}
.page-content::after{
    content:"";
    display:block;
}
footer, .page-content::after{
    height:40px;
}
.content_section{
    width:60%;
}
</style>
<body>

<center>
<form method="POST" style="margin:0 auto;width:80%;display:block;">{%csrf_token%}
        <div class="row justify-content-center align-items-center">
   <div class="col-4">
   	<label>Select Employee Id - </label>
   	<select class="form-control" id = "users" name="emp_id">
   		{% for uname in emp %}
   			<option value = {{uname.emp_id}}>{{uname.emp_id}}</option>
   		{% endfor %}
   	</select>
       <label>Select Role - </label>
       <select class="form-control" name="role">
   			<option value="Superuser">Superuser</option>
               <option value="Bogie">Bogie</option>
               <option value="Wheel">Wheel</option>
   	</select>
   </div>
   <div class="col-9" id = "user_info">
   	<hr />
   	<table class="table table-stripped table-fixed">
		<thead>
			<tr>
				<td name="name">Name</td>
				<td name="designation">Designation</td>
				<td name="department">Department</td>
				<td name="email">Email</td>
				<td name="contactno">Contact-no</td>
			</tr>
		</thead>
   		<tbody>
   		</tbody>
   	</table>
   </div>
   </div>
        <button type="submit" class="button button2">Create</button>
</form>
</center>
<script type="text/javascript">
$(document).ready(function(){
   $("#users").change(function(e){
   	e.preventDefault();
   	var username = $(this).val();
   	var data = {username};
       	$.ajax({
   		type : 'GET',
   		url :  "{% url 'get_emp_info' %}",
        dataType : 'json',
   		data : data,
   		success : function(response){
   			$("#user_info table tbody").html(`<tr>
   				<td name="name">${response.emp_info.name}</td>
   				<td name="designation">${response.emp_info.designation}</td>
   				<td name="department">${response.emp_info.department}</td>
   				<td name="email">${response.emp_info.email}</td>
   				<td name="contactno">${response.emp_info.contactno}</td>
   				</tr>`)
   		},
   		error : function(response){
   		}
   	})
})
})
</script>
</body>
</html>
